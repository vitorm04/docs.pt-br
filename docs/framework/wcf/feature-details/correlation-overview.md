---
title: Visão geral de correlação
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 8d33022524a4619a57b04e7774918fd73d0bdef3
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90552551"
---
# <a name="correlation-overview"></a><span data-ttu-id="00254-102">Visão geral de correlação</span><span class="sxs-lookup"><span data-stu-id="00254-102">Correlation Overview</span></span>
<span data-ttu-id="00254-103">A correlação é o mecanismo para relacionar mensagens do serviço de fluxo de trabalho entre si ou com o estado de instância do aplicativo, como uma resposta a uma solicitação inicial ou uma ID de ordem específica para o estado persistente de um fluxo de trabalho de processamento de pedidos.</span><span class="sxs-lookup"><span data-stu-id="00254-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="00254-104">Este tópico fornece uma visão geral da correlação.</span><span class="sxs-lookup"><span data-stu-id="00254-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="00254-105">Os outros tópicos nesta seção fornecem informações adicionais para cada tipo de correlação.</span><span class="sxs-lookup"><span data-stu-id="00254-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="00254-106">Tipos de correlação</span><span class="sxs-lookup"><span data-stu-id="00254-106">Types of Correlation</span></span>  
 <span data-ttu-id="00254-107">A correlação pode ser baseada em protocolo ou em conteúdo.</span><span class="sxs-lookup"><span data-stu-id="00254-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="00254-108">As correlações baseadas em protocolo usam dados fornecidos pela infraestrutura de entrega de mensagens para fornecer o mapeamento entre as mensagens.</span><span class="sxs-lookup"><span data-stu-id="00254-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="00254-109">As mensagens correlacionadas usando a correlação baseada em protocolo estão relacionadas entre si usando um objeto na memória, como um <xref:System.ServiceModel.Channels.RequestContext> , ou por um token fornecido pelo protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="00254-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="00254-110">Correlações com base em conteúdo relacionam mensagens entre si usando dados especificados pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="00254-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="00254-111">As mensagens correlacionadas usando a correlação baseada em conteúdo estão relacionadas entre si por alguns dados definidos pelo aplicativo na mensagem, como um número de cliente.</span><span class="sxs-lookup"><span data-stu-id="00254-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="00254-112">As atividades que participam da correlação usam um <xref:System.ServiceModel.Activities.CorrelationHandle> para ligar as atividades de mensagens juntas.</span><span class="sxs-lookup"><span data-stu-id="00254-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="00254-113">Por exemplo, um <xref:System.ServiceModel.Activities.Send> que é usado para chamar um serviço e um subseqüente <xref:System.ServiceModel.Activities.Receive> usado para receber um retorno de chamada do serviço, compartilha o mesmo <xref:System.ServiceModel.Activities.CorrelationHandle> .</span><span class="sxs-lookup"><span data-stu-id="00254-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="00254-114">Esse padrão básico é usado se a correlação é baseada em conteúdo ou com base em protocolo.</span><span class="sxs-lookup"><span data-stu-id="00254-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="00254-115">O identificador de correlação pode ser definido explicitamente em cada atividade ou as atividades podem estar contidas em uma <xref:System.ServiceModel.Activities.CorrelationScope> atividade.</span><span class="sxs-lookup"><span data-stu-id="00254-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="00254-116">As atividades contidas em um <xref:System.ServiceModel.Activities.CorrelationScope> têm seus identificadores de correlação gerenciados pelo <xref:System.ServiceModel.Activities.CorrelationScope> e não exigem que o seja <xref:System.ServiceModel.Activities.CorrelationHandle> definido explicitamente.</span><span class="sxs-lookup"><span data-stu-id="00254-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="00254-117">Um <xref:System.ServiceModel.Activities.CorrelationScope> escopo fornece <xref:System.ServiceModel.Activities.CorrelationHandle> Gerenciamento para uma correlação de solicitação-resposta e um tipo de correlação adicional.</span><span class="sxs-lookup"><span data-stu-id="00254-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="00254-118">Os serviços de fluxo de trabalho hospedados com <xref:System.ServiceModel.Activities.WorkflowServiceHost> o têm o mesmo gerenciamento de correlação padrão que a <xref:System.ServiceModel.Activities.CorrelationScope> atividade.</span><span class="sxs-lookup"><span data-stu-id="00254-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="00254-119">Esse gerenciamento de correlação padrão geralmente significa que, em muitos cenários, as atividades de mensagens em um <xref:System.ServiceModel.Activities.CorrelationScope> ou em um serviço de fluxo de trabalho não exigem seu <xref:System.ServiceModel.Activities.CorrelationHandle> conjunto, a menos que várias atividades de mensagens estejam em paralelo ou sobreponham, como duas <xref:System.ServiceModel.Activities.Receive> atividades em paralelo ou duas <xref:System.ServiceModel.Activities.Send> atividades seguidas por duas <xref:System.ServiceModel.Activities.Receive> atividades.</span><span class="sxs-lookup"><span data-stu-id="00254-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="00254-120">Mais informações sobre correlação padrão são fornecidas nos tópicos desta seção que abrangem cada tipo específico de correlação.</span><span class="sxs-lookup"><span data-stu-id="00254-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> <span data-ttu-id="00254-121">Para obter mais informações sobre as atividades de mensagens, consulte [atividades de mensagens](messaging-activities.md) e [como: criar um serviço de fluxo de trabalho com atividades de mensagens](how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="00254-121">For more information about messaging activities see [Messaging Activities](messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="00254-122">Correlação baseada em protocolo</span><span class="sxs-lookup"><span data-stu-id="00254-122">Protocol-Based Correlation</span></span>

<span data-ttu-id="00254-123">A correlação baseada em protocolo usa o mecanismo de transporte para relacionar mensagens entre si e a instância apropriada.</span><span class="sxs-lookup"><span data-stu-id="00254-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="00254-124">Algumas correlações de protocolo fornecidas pelo sistema incluem correlação de solicitação-resposta e correlação baseada em contexto.</span><span class="sxs-lookup"><span data-stu-id="00254-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="00254-125">Uma correlação de solicitação-resposta é usada para correlacionar um único par de atividades de mensagens para formar uma operação bidirecional, como um <xref:System.ServiceModel.Activities.Send> emparelhado com um <xref:System.ServiceModel.Activities.ReceiveReply> ou um <xref:System.ServiceModel.Activities.Receive> emparelhado com um <xref:System.ServiceModel.Activities.SendReply> .</span><span class="sxs-lookup"><span data-stu-id="00254-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="00254-126">O Designer de Fluxo de Trabalho do Visual Studio também fornece um conjunto de modelos de atividade para implementar rapidamente esse padrão.</span><span class="sxs-lookup"><span data-stu-id="00254-126">The Visual Studio Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="00254-127">Uma correlação baseada em contexto é baseada no mecanismo de troca de contexto descrito na [especificação de protocolo do Exchange de contexto do .net](/openspecs/windows_protocols/mc-netcex/a7f26280-491f-465b-9914-c5eb5322dbb4).</span><span class="sxs-lookup"><span data-stu-id="00254-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](/openspecs/windows_protocols/mc-netcex/a7f26280-491f-465b-9914-c5eb5322dbb4).</span></span> <span data-ttu-id="00254-128">Para usar a correlação baseada em contexto, uma associação baseada em contexto, como <xref:System.ServiceModel.BasicHttpContextBinding> , <xref:System.ServiceModel.WSHttpContextBinding> ou <xref:System.ServiceModel.NetTcpContextBinding> deve ser usada no ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="00254-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
<span data-ttu-id="00254-129">Para obter mais informações sobre correlação de protocolo, consulte [duplex durável](durable-duplex-correlation.md) e [solicitação-resposta](request-reply-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="00254-129">For more information about protocol correlation, see [Durable Duplex](durable-duplex-correlation.md) and [Request-Reply](request-reply-correlation.md).</span></span> <span data-ttu-id="00254-130">Para obter mais informações sobre como usar os modelos de atividade de Designer de Fluxo de Trabalho do Visual Studio, consulte [atividades de mensagens](messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="00254-130">For more information about using the Visual Studio Workflow Designer activity templates, see [Messaging Activities](messaging-activities.md).</span></span> <span data-ttu-id="00254-131">Para obter o código de exemplo, consulte o exemplo [NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100)) .</span><span class="sxs-lookup"><span data-stu-id="00254-131">For sample code, see the [NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100)) sample.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="00254-132">Correlação conteudo base</span><span class="sxs-lookup"><span data-stu-id="00254-132">Content-Based Correlation</span></span>

<span data-ttu-id="00254-133">A correlação baseada em conteúdo usa alguma informação na mensagem para associá-la a uma instância específica.</span><span class="sxs-lookup"><span data-stu-id="00254-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="00254-134">Diferentemente da correlação baseada em protocolo, a correlação baseada em conteúdo exige que o autor do aplicativo declare explicitamente onde esses dados podem ser encontrados em cada mensagem relacionada.</span><span class="sxs-lookup"><span data-stu-id="00254-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="00254-135">As atividades que usam a correlação baseada em conteúdo especificam esses dados de mensagem usando um <xref:System.ServiceModel.MessageQuerySet> .</span><span class="sxs-lookup"><span data-stu-id="00254-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="00254-136">A correlação baseada em conteúdo é útil ao se comunicar com serviços que não usam uma das associações de contexto, como <xref:System.ServiceModel.BasicHttpContextBinding> .</span><span class="sxs-lookup"><span data-stu-id="00254-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="00254-137">Confira também</span><span class="sxs-lookup"><span data-stu-id="00254-137">See also</span></span>

- <span data-ttu-id="00254-138">[NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="00254-138">[NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100))</span></span>
