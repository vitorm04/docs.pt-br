---
title: Inspeção da árvore de atividade
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 692f36d993c3f9c27839122b388a24d0698a2b59
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79183034"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="e5c0c-102">Inspeção da árvore de atividade</span><span class="sxs-lookup"><span data-stu-id="e5c0c-102">Activity Tree Inspection</span></span>
<span data-ttu-id="e5c0c-103">A inspeção da árvore de atividade é usada por autores de aplicativo de fluxo de trabalho para inspecionar os fluxos de trabalho hospedados pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="e5c0c-104">Usando <xref:System.Activities.WorkflowInspectionServices>, os fluxos de trabalho podem ser pesquisados para atividades filhos específicas, as atividades individuais e suas propriedades podem ser enumeradas, e os metadados de runtime das atividades podem ser armazenados em cachê em um horário específico.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="e5c0c-105">Este tópico fornece uma visão geral de <xref:System.Activities.WorkflowInspectionServices> e como usá-la para inspecionar uma árvore de atividade.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="e5c0c-106">Usando WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="e5c0c-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="e5c0c-107">O método de <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> é usado para enumerar todas as atividades na árvore de atividade especificada.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="e5c0c-108">retorna um<xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> enumerável que toque em todas as atividades dentro da árvore que inclui filhos, manipuladores de representante opções, variáveis, e expressões de argumento.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="e5c0c-109">No exemplo a seguir, uma definição de fluxo de trabalho é criada usando <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, e expressões.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="e5c0c-110">Depois que a definição de fluxo de trabalho é criada, invoca-se e o método de `InspectActivity` é então chamado.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="e5c0c-111">Para enumerar as atividades, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> é chamado a atividade de raiz, e novamente recursivamente em cada atividade retornado.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="e5c0c-112">No exemplo a seguir, <xref:System.Activities.Activity.DisplayName%2A> de cada atividade e expressão na árvore de atividade é escrito no console.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="e5c0c-113">Esse código de exemplo fornece a seguinte saída.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="e5c0c-114">**Listar item 1**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-114">**List Item 1**</span></span>  
<span data-ttu-id="e5c0c-115">**Lista Item 2**
**Lista Item 3**
**Lista Item 4**
**Lista Item 5**
**Itens adicionados à coleção.** 
 **Seqüência** **\<literal<List String>>**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-115">**List Item 2**
**List Item 3**
**List Item 4**
**List Item 5**
**Items added to collection.**
**Sequence** **Literal<List\<String>>**</span></span>  
 <span data-ttu-id="e5c0c-116">**While**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-116">**While**</span></span>  
 <span data-ttu-id="e5c0c-117">**Adicionar>\<de seqüência de cordas**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-117">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="e5c0c-118">**VariávelValor<\<>>de string iCollection**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-118">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="e5c0c-119">**>de\<cordas LambdaValue**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-119">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="e5c0c-120">**Seqüeique\<de seqüelinha de<de<de localização>>**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-120">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="e5c0c-121">**LambdaValue\<Boolean>**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-121">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="e5c0c-122">**Seqüeique\<de seqüelinha de<de<de localização>>**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-122">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="e5c0c-123">**>\<de cordas ForEach**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-123">**ForEach\<String>**</span></span>  
 <span data-ttu-id="e5c0c-124">**VariávelValor<>>\<de string sumouo**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-124">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="e5c0c-125">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-125">**WriteLine**</span></span>  
 <span data-ttu-id="e5c0c-126">**>de\<seqüência de string delegateargumentvalue**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-126">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="e5c0c-127">**Seqüência**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-127">**Sequence**</span></span>  
 <span data-ttu-id="e5c0c-128">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="e5c0c-128">**WriteLine**</span></span>  
 <span data-ttu-id="e5c0c-129">**String\<>** Para recuperar uma atividade específica em vez <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> de enumerar todas as atividades, é usado.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-129">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="e5c0c-130"><xref:System.Activities.WorkflowInspectionServices.Resolve%2A> e <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> executam o cachê de metadados `WorkflowInspectionServices.CacheMetadata` se não tiver sido chamado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-130">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="e5c0c-131">Se <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> tiver sido chamado em <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> é baseado nos metadados existentes.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-131">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="e5c0c-132">Portanto, se as alterações de árvore foram feitas desde a última chamada a <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> pode dar resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-132">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="e5c0c-133">Se houver alterações no fluxo <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>de trabalho após a chamada, os <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> metadados podem ser rearmazenados re-cacheando chamando o método.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-133">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="e5c0c-134">Armazenando em cachê metadados é abordado na seção a seguir.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-134">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="e5c0c-135">Metadados de Caching</span><span class="sxs-lookup"><span data-stu-id="e5c0c-135">Caching Metadata</span></span>  
 <span data-ttu-id="e5c0c-136">Armazenando em cachê os metadados para uma atividade compila e valida uma descrição dos argumentos de atividade, variáveis, as atividades filhos, e os representantes de atividade.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-136">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="e5c0c-137">Os metadados, são armazenados em cachê por padrão no runtime em que uma atividade é preparada para a execução.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-137">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="e5c0c-138">Se um autor de host de fluxo de trabalho deseja armazenar em cachê os metadados para uma atividade ou a árvore de atividade antes disso, por exemplo tomar com antecedência todos os custos, então <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> pode ser usada para armazenar em cachê os metadados em tempo desejado.</span><span class="sxs-lookup"><span data-stu-id="e5c0c-138">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
