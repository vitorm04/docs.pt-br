---
title: Usando threads e threading
description: Saiba mais sobre como usar threads e threading no .NET, para que você possa escrever aplicativos para executar muitas operações ao mesmo tempo (multithreading).
ms.date: 08/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- threading [.NET], about threading
- managed threading
ms.assetid: 9b5ec2cd-121b-4d49-b075-222cf26f2344
ms.openlocfilehash: 127ea9e28d9ce303270512bf86bf4eecf2f86437
ms.sourcegitcommit: 7588b1f16b7608bc6833c05f91ae670c22ef56f8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/02/2020
ms.locfileid: "93188699"
---
# <a name="using-threads-and-threading"></a><span data-ttu-id="38d36-103">Usando threads e threading</span><span class="sxs-lookup"><span data-stu-id="38d36-103">Using threads and threading</span></span>

<span data-ttu-id="38d36-104">Com o .NET, você pode escrever aplicativos que executam várias operações ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="38d36-104">With .NET, you can write applications that perform multiple operations at the same time.</span></span> <span data-ttu-id="38d36-105">As operações com o potencial de atrasar outras operações podem ser executadas em threads separados, um processo conhecido como *multithreading* ou *free threading* .</span><span class="sxs-lookup"><span data-stu-id="38d36-105">Operations with the potential of holding up other operations can execute on separate threads, a process known as *multithreading* or *free threading* .</span></span>  
  
<span data-ttu-id="38d36-106">Aplicativos que usam multithreading são mais responsivos a entradas do usuário porque a interface do usuário permanece ativa, enquanto tarefas com uso intensivo do processador são executadas em threads separados.</span><span class="sxs-lookup"><span data-stu-id="38d36-106">Applications that use multithreading are more responsive to user input because the user interface stays active as processor-intensive tasks execute on separate threads.</span></span> <span data-ttu-id="38d36-107">O multithreading também é útil quando você cria aplicativos escalonáveis, porque você pode adicionar threads conforme a carga de trabalho aumenta.</span><span class="sxs-lookup"><span data-stu-id="38d36-107">Multithreading is also useful when you create scalable applications, because you can add threads as the workload increases.</span></span>

> [!NOTE]
> <span data-ttu-id="38d36-108">Se precisar de mais controle sobre o comportamento dos threads de seu aplicativo, você poderá gerenciar os threads por conta própria.</span><span class="sxs-lookup"><span data-stu-id="38d36-108">If you need more control over the behavior of the application's threads, you can manage the threads yourself.</span></span> <span data-ttu-id="38d36-109">No entanto, a programação multithread é bastante simplificada com as <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> classes e o <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), as classes de coleção simultâneas no <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace e um modelo de programação baseado no conceito de tarefas em vez de threads.</span><span class="sxs-lookup"><span data-stu-id="38d36-109">However, multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="38d36-110">Para obter mais informações, confira [Programação paralela](../parallel-programming/index.md) e [TPL (biblioteca de paralelismo de tarefas)](../parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="38d36-110">For more information, see [Parallel Programming](../parallel-programming/index.md) and [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span></span>

## <a name="how-to-create-and-start-a-new-thread"></a><span data-ttu-id="38d36-111">Como criar e iniciar um thread</span><span class="sxs-lookup"><span data-stu-id="38d36-111">How to: Create and start a new thread</span></span>

<span data-ttu-id="38d36-112">Crie um thread criando uma nova instância da classe <xref:System.Threading.Thread?displayProperty=nameWithType> e fornecendo o nome do método que você deseja executar em um novo thread para o construtor.</span><span class="sxs-lookup"><span data-stu-id="38d36-112">You create a new thread by creating a new instance of the <xref:System.Threading.Thread?displayProperty=nameWithType> class and providing the name of the method that you want to execute on a new thread to the constructor.</span></span> <span data-ttu-id="38d36-113">Para iniciar um thread criado, chame o método <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="38d36-113">To start a created thread, call the <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="38d36-114">Para obter mais informações e exemplos, confira o artigo [Criando threads e passando dados na hora de início](creating-threads-and-passing-data-at-start-time.md) e a referência da API <xref:System.Threading.Thread>.</span><span class="sxs-lookup"><span data-stu-id="38d36-114">For more information and examples, see the [Creating threads and passing data at start time](creating-threads-and-passing-data-at-start-time.md) article and the <xref:System.Threading.Thread> API reference.</span></span>

## <a name="how-to-stop-a-thread"></a><span data-ttu-id="38d36-115">Como interromper um thread</span><span class="sxs-lookup"><span data-stu-id="38d36-115">How to: Stop a thread</span></span>

<span data-ttu-id="38d36-116">Para encerrar a execução de um thread, use o <xref:System.Threading.CancellationToken?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="38d36-116">To terminate the execution of a thread, use the <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span></span> <span data-ttu-id="38d36-117">Ele fornece uma maneira unificada de parar os threads de forma cooperativa.</span><span class="sxs-lookup"><span data-stu-id="38d36-117">It provides a unified way to stop threads cooperatively.</span></span> <span data-ttu-id="38d36-118">Para saber mais, confira [Cancelamento em threads gerenciados](cancellation-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="38d36-118">For more information, see [Cancellation in managed threads](cancellation-in-managed-threads.md).</span></span>

<span data-ttu-id="38d36-119">Às vezes, não é possível parar um thread de cooperativa, pois ele executa código de terceiros não projetado para cancelamento cooperativo.</span><span class="sxs-lookup"><span data-stu-id="38d36-119">Sometimes it is not possible to stop a thread cooperatively, because it runs third-party code not designed for cooperative cancellation.</span></span> <span data-ttu-id="38d36-120">Nesse caso, talvez você queira encerrar sua execução forçosamente.</span><span class="sxs-lookup"><span data-stu-id="38d36-120">In this case, you might want to terminate its execution forcibly.</span></span> <span data-ttu-id="38d36-121">Para encerrar a execução de um thread de modo forçado, em .NET Framework você pode usar o <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="38d36-121">To terminate the execution of a thread forcibly, in .NET Framework you can use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="38d36-122">Esse método gera uma <xref:System.Threading.ThreadAbortException> no thread em que é invocado.</span><span class="sxs-lookup"><span data-stu-id="38d36-122">That method raises a <xref:System.Threading.ThreadAbortException> on the thread on which it's invoked.</span></span> <span data-ttu-id="38d36-123">Para obter mais informações, confira [Destruindo threads](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="38d36-123">For more information, see [Destroying threads](destroying-threads.md).</span></span> <span data-ttu-id="38d36-124">O <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> método não tem suporte no .NET Core.</span><span class="sxs-lookup"><span data-stu-id="38d36-124">The <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method is not supported in .NET Core.</span></span> <span data-ttu-id="38d36-125">Se você precisar encerrar a execução de código de terceiros de modo forçado no .NET Core, execute-o no processo e uso separados <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="38d36-125">If you need to terminate the execution of third-party code forcibly in .NET Core, run it in the separate process and use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="38d36-126">O <xref:System.Threading.CancellationToken?displayProperty=nameWithType> não está disponível antes de .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="38d36-126">The <xref:System.Threading.CancellationToken?displayProperty=nameWithType> is not available before .NET Framework 4.</span></span> <span data-ttu-id="38d36-127">Para interromper um thread em versões mais antigas do .NET Framework, implemente o cancelamento cooperativo manualmente usando as técnicas de sincronização de threads.</span><span class="sxs-lookup"><span data-stu-id="38d36-127">To stop a thread in older .NET Framework versions, implement the cooperative cancellation manually using the thread synchronization techniques.</span></span> <span data-ttu-id="38d36-128">Por exemplo, você pode criar o campo booliano volátil `shouldStop` e usá-lo para solicitar o código executado pelo thread para parar.</span><span class="sxs-lookup"><span data-stu-id="38d36-128">For example, you can create the volatile boolean field `shouldStop` and use it to request the code executed by the thread to stop.</span></span> <span data-ttu-id="38d36-129">Para obter mais informações, consulte [volátil](../../csharp/language-reference/keywords/volatile.md) em referência de C# e <xref:System.Threading.Volatile?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="38d36-129">For more information, see [volatile](../../csharp/language-reference/keywords/volatile.md) in C# Reference and <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="38d36-130">Use o <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> método para fazer com que o thread de chamada aguarde o encerramento do thread que está sendo interrompido.</span><span class="sxs-lookup"><span data-stu-id="38d36-130">Use the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method to make the calling thread wait for the termination of the thread being stopped.</span></span>

## <a name="how-to-pause-or-interrupt-a-thread"></a><span data-ttu-id="38d36-131">Como pausar ou interromper um thread</span><span class="sxs-lookup"><span data-stu-id="38d36-131">How to: Pause or interrupt a thread</span></span>

<span data-ttu-id="38d36-132">Use o método <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> para pausar o thread atual por um período de tempo especificado.</span><span class="sxs-lookup"><span data-stu-id="38d36-132">You use the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method to pause the current thread for a specified amount of time.</span></span> <span data-ttu-id="38d36-133">Você pode interromper um thread bloqueado chamando o método <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="38d36-133">You can interrupt a blocked thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="38d36-134">Para obter mais informações, confira [Pausando e interrompendo threads](pausing-and-resuming-threads.md).</span><span class="sxs-lookup"><span data-stu-id="38d36-134">For more information, see [Pausing and interrupting threads](pausing-and-resuming-threads.md).</span></span>

## <a name="thread-properties"></a><span data-ttu-id="38d36-135">Propriedades do thread</span><span class="sxs-lookup"><span data-stu-id="38d36-135">Thread properties</span></span>

<span data-ttu-id="38d36-136">A tabela a seguir apresenta algumas das propriedades do <xref:System.Threading.Thread>:</span><span class="sxs-lookup"><span data-stu-id="38d36-136">The following table presents some of the <xref:System.Threading.Thread> properties:</span></span>  
  
|<span data-ttu-id="38d36-137">Propriedade</span><span class="sxs-lookup"><span data-stu-id="38d36-137">Property</span></span>|<span data-ttu-id="38d36-138">Descrição</span><span class="sxs-lookup"><span data-stu-id="38d36-138">Description</span></span>|  
|--------------|-----------|  
|<xref:System.Threading.Thread.IsAlive%2A>|<span data-ttu-id="38d36-139">Retorna `true` quando um thread foi iniciado e ainda não foi encerrado normalmente ou anulado.</span><span class="sxs-lookup"><span data-stu-id="38d36-139">Returns `true` if a thread has been started and has not yet terminated normally or aborted.</span></span>|  
|<xref:System.Threading.Thread.IsBackground%2A>|<span data-ttu-id="38d36-140">Obtém ou define um valor booliano que indica se um thread é um thread em segundo plano.</span><span class="sxs-lookup"><span data-stu-id="38d36-140">Gets or sets a Boolean that indicates if a thread is a background thread.</span></span> <span data-ttu-id="38d36-141">Os threads em segundo plano são como threads em primeiro plano, mas um thread em segundo plano não impede que um processo pare.</span><span class="sxs-lookup"><span data-stu-id="38d36-141">Background threads are like foreground threads, but a background thread doesn't prevent a process from stopping.</span></span> <span data-ttu-id="38d36-142">Após todos os threads de primeiro plano que pertencem a um processo serem parados, o Common Language Runtime finaliza o processo chamando o método <xref:System.Threading.Thread.Abort%2A> em threads em segundo plano que ainda estão ativos.</span><span class="sxs-lookup"><span data-stu-id="38d36-142">Once all foreground threads that belong to a process have stopped, the common language runtime ends the process by calling the <xref:System.Threading.Thread.Abort%2A> method on background threads that are still alive.</span></span> <span data-ttu-id="38d36-143">Para obter mais informações, confira [Threads em primeiro plano e em segundo plano](foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="38d36-143">For more information, see [Foreground and Background Threads](foreground-and-background-threads.md).</span></span>|  
|<xref:System.Threading.Thread.Name%2A>|<span data-ttu-id="38d36-144">Obtém ou define o nome de um thread.</span><span class="sxs-lookup"><span data-stu-id="38d36-144">Gets or sets the name of a thread.</span></span> <span data-ttu-id="38d36-145">Usado com mais frequência para descobrir threads individuais quando você depura.</span><span class="sxs-lookup"><span data-stu-id="38d36-145">Most frequently used to discover individual threads when you debug.</span></span>|  
|<xref:System.Threading.Thread.Priority%2A>|<span data-ttu-id="38d36-146">Obtém ou define um valor de <xref:System.Threading.ThreadPriority> que é usado pelo sistema operacional para priorizar agendamentos de thread.</span><span class="sxs-lookup"><span data-stu-id="38d36-146">Gets or sets a <xref:System.Threading.ThreadPriority> value that is used by the operating system to prioritize thread scheduling.</span></span> <span data-ttu-id="38d36-147">Para obter mais informações, confira [Agendando threads](scheduling-threads.md) e a referência de <xref:System.Threading.ThreadPriority>.</span><span class="sxs-lookup"><span data-stu-id="38d36-147">For more information, see [Scheduling threads](scheduling-threads.md) and the <xref:System.Threading.ThreadPriority> reference.</span></span>|  
|<xref:System.Threading.Thread.ThreadState%2A>|<span data-ttu-id="38d36-148">Obtém um valor <xref:System.Threading.ThreadState> que contém os estados atuais de um thread.</span><span class="sxs-lookup"><span data-stu-id="38d36-148">Gets a <xref:System.Threading.ThreadState> value containing the current states of a thread.</span></span>|  

## <a name="see-also"></a><span data-ttu-id="38d36-149">Confira também</span><span class="sxs-lookup"><span data-stu-id="38d36-149">See also</span></span>

- <xref:System.Threading.Thread?displayProperty=nameWithType>
- [<span data-ttu-id="38d36-150">Threads e threading</span><span class="sxs-lookup"><span data-stu-id="38d36-150">Threads and Threading</span></span>](threads-and-threading.md)
- [<span data-ttu-id="38d36-151">Programação paralela</span><span class="sxs-lookup"><span data-stu-id="38d36-151">Parallel Programming</span></span>](../parallel-programming/index.md)
