---
title: Programação orientada a objeto (C#)
description: O C# fornece suporte completo para a programação orientada a objeto, incluindo abstração, encapsulamento, herança e polimorfismo.
ms.date: 09/30/2020
ms.openlocfilehash: 353edf8fc68f495f3d875fa678aaaf91f1fd6406
ms.sourcegitcommit: 870bc4b4087510f6fba3c7b1c0d391f02bcc1f3e
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/23/2020
ms.locfileid: "92471589"
---
# <a name="object-oriented-programming-c"></a><span data-ttu-id="1bec4-103">Programação de Object-Oriented (C#)</span><span class="sxs-lookup"><span data-stu-id="1bec4-103">Object-Oriented programming (C#)</span></span>

<span data-ttu-id="1bec4-104">O C# é uma linguagem orientada a objeto.</span><span class="sxs-lookup"><span data-stu-id="1bec4-104">C# is an object-oriented language.</span></span> <span data-ttu-id="1bec4-105">Quatro das principais técnicas usadas na programação orientada a objeto são:</span><span class="sxs-lookup"><span data-stu-id="1bec4-105">Four of the key techniques used in object-oriented programming are:</span></span>

- <span data-ttu-id="1bec4-106">*Abstração* significa ocultar os detalhes desnecessários do tipo consumidores.</span><span class="sxs-lookup"><span data-stu-id="1bec4-106">*Abstraction* means hiding the unnecessary details from type consumers.</span></span>
- <span data-ttu-id="1bec4-107">*Encapsulamento* significa que um grupo de propriedades, métodos e outros membros relacionados é tratado como uma única unidade ou objeto.</span><span class="sxs-lookup"><span data-stu-id="1bec4-107">*Encapsulation* means that a group of related properties, methods, and other members are treated as a single unit or object.</span></span>
- <span data-ttu-id="1bec4-108">*Herança* descreve a capacidade de criar novas classes com base em uma classe existente.</span><span class="sxs-lookup"><span data-stu-id="1bec4-108">*Inheritance* describes the ability to create new classes based on an existing class.</span></span>
- <span data-ttu-id="1bec4-109">*Polimorfismo* significa que você pode ter várias classes que podem ser usadas de forma intercambiável, ainda que cada classe implemente as mesmas propriedades ou métodos de maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="1bec4-109">*Polymorphism* means that you can have multiple classes that can be used interchangeably, even though each class implements the same properties or methods in different ways.</span></span>

<span data-ttu-id="1bec4-110">No tutorial anterior, [introdução às classes](introduction-to-classes.md) que você viu *abstração* e *encapsulamento*.</span><span class="sxs-lookup"><span data-stu-id="1bec4-110">In the preceding tutorial, [introduction to classes](introduction-to-classes.md) you saw both *abstraction* and *encapsulation*.</span></span> <span data-ttu-id="1bec4-111">A `BankAccount` classe forneceu uma abstração para o conceito de uma conta bancária.</span><span class="sxs-lookup"><span data-stu-id="1bec4-111">The `BankAccount` class provided an abstraction for the concept of a bank account.</span></span> <span data-ttu-id="1bec4-112">Você poderia modificar sua implementação sem afetar nenhum código que usava a `BankAccount` classe.</span><span class="sxs-lookup"><span data-stu-id="1bec4-112">You could modify its implementation without affecting any of the code that used the `BankAccount` class.</span></span> <span data-ttu-id="1bec4-113">As `BankAccount` classes e `Transaction` fornecem encapsulamento dos componentes necessários para descrever esses conceitos no código.</span><span class="sxs-lookup"><span data-stu-id="1bec4-113">Both the `BankAccount` and `Transaction` classes provide encapsulation of the components needed to describe those concepts in code.</span></span>

<span data-ttu-id="1bec4-114">Neste tutorial, você estenderá esse aplicativo para fazer uso de *herança* e *polimorfismo* para adicionar novos recursos.</span><span class="sxs-lookup"><span data-stu-id="1bec4-114">In this tutorial, you'll extend that application to make use of *inheritance* and *polymorphism* to add new features.</span></span> <span data-ttu-id="1bec4-115">Você também adicionará recursos à `BankAccount` classe, aproveitando as técnicas de *abstração* e de *encapsulamento* aprendidas no tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="1bec4-115">You'll also add features to the `BankAccount` class, taking advantage of the *abstraction* and *encapsulation* techniques you learned in the preceding tutorial.</span></span>

## <a name="create-different-types-of-accounts"></a><span data-ttu-id="1bec4-116">Criar diferentes tipos de contas</span><span class="sxs-lookup"><span data-stu-id="1bec4-116">Create different types of accounts</span></span>

<span data-ttu-id="1bec4-117">Depois de criar esse programa, você receberá solicitações para adicionar recursos a ele.</span><span class="sxs-lookup"><span data-stu-id="1bec4-117">After building this program, you get requests to add features to it.</span></span> <span data-ttu-id="1bec4-118">Ele funciona muito bem na situação em que há apenas um tipo de conta bancária.</span><span class="sxs-lookup"><span data-stu-id="1bec4-118">It works great in the situation where there is only one bank account type.</span></span> <span data-ttu-id="1bec4-119">Ao longo do tempo, as necessidades mudam e os tipos de conta relacionados são solicitados:</span><span class="sxs-lookup"><span data-stu-id="1bec4-119">Over time, needs change, and related account types are requested:</span></span>

- <span data-ttu-id="1bec4-120">Uma conta de conquista de interesse que acumula interesse no final de cada mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-120">An interest earning account that accrues interest at the end of each month.</span></span>
- <span data-ttu-id="1bec4-121">Uma linha de crédito que pode ter um saldo negativo, mas quando há um saldo, há um encargo de juros a cada mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-121">A line of credit that can have a negative balance, but when there's a balance, there's an interest charge each month.</span></span>
- <span data-ttu-id="1bec4-122">Uma conta de vale-presente pré-paga que começa com um único depósito e pode ser paga.</span><span class="sxs-lookup"><span data-stu-id="1bec4-122">A pre-paid gift card account that starts with a single deposit, and only can be paid off.</span></span> <span data-ttu-id="1bec4-123">Ele pode ser recarregado uma vez no início de cada mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-123">It can be refilled once at the start of each month.</span></span>

<span data-ttu-id="1bec4-124">Todas essas contas diferentes são semelhantes à `BankAccount` classe definida no tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="1bec4-124">All of these different accounts are similar to `BankAccount` class defined in the earlier tutorial.</span></span> <span data-ttu-id="1bec4-125">Você pode copiar esse código, renomear as classes e fazer modificações.</span><span class="sxs-lookup"><span data-stu-id="1bec4-125">You could copy that code, rename the classes, and make modifications.</span></span> <span data-ttu-id="1bec4-126">Essa técnica funcionaria a curto prazo, mas seria mais trabalho ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-126">That technique would work in the short term, but it would be more work over time.</span></span> <span data-ttu-id="1bec4-127">Todas as alterações seriam copiadas em todas as classes afetadas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-127">Any changes would be copied across all the affected classes.</span></span>

<span data-ttu-id="1bec4-128">Em vez disso, você pode criar novos tipos de conta bancária que herdam métodos e dados da `BankAccount` classe criada no tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="1bec4-128">Instead, you can create new bank account types that inherit methods and data from the `BankAccount` class created in the preceding tutorial.</span></span> <span data-ttu-id="1bec4-129">Essas novas classes podem estender a `BankAccount` classe com o comportamento específico necessário para cada tipo:</span><span class="sxs-lookup"><span data-stu-id="1bec4-129">These new classes can extend the `BankAccount` class with the specific behavior needed for each type:</span></span>

```csharp
public class InterestEarningAccount : BankAccount
{
}

public class LineOfCreditAccount : BankAccount
{
}

public class GiftCardAccount : BankAccount
{
}
```

<span data-ttu-id="1bec4-130">Cada uma dessas classes *herda* o comportamento compartilhado de sua *classe base*compartilhada, a `BankAccount` classe.</span><span class="sxs-lookup"><span data-stu-id="1bec4-130">Each of these classes *inherits* the shared behavior from their shared *base class*, the `BankAccount` class.</span></span> <span data-ttu-id="1bec4-131">Escreva as implementações para uma funcionalidade nova e diferente em cada uma das *classes derivadas*.</span><span class="sxs-lookup"><span data-stu-id="1bec4-131">Write the implementations for new and different functionality in each of the *derived classes*.</span></span>  <span data-ttu-id="1bec4-132">Essas classes derivadas já têm todo o comportamento definido na `BankAccount` classe.</span><span class="sxs-lookup"><span data-stu-id="1bec4-132">These derived classes already have all the behavior defined in the `BankAccount` class.</span></span>

<span data-ttu-id="1bec4-133">É uma boa prática criar cada nova classe em um arquivo de origem diferente.</span><span class="sxs-lookup"><span data-stu-id="1bec4-133">It's a good practice to create each new class in a different source file.</span></span> <span data-ttu-id="1bec4-134">No [Visual Studio](https://visualstudio.com), você pode clicar com o botão direito do mouse no projeto e selecionar *Adicionar classe* para adicionar uma nova classe em um novo arquivo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-134">In [Visual Studio](https://visualstudio.com), you can right-click on the project, and select *add class* to add a new class in a new file.</span></span> <span data-ttu-id="1bec4-135">Em [Visual Studio Code](https://code.visualstudio.com), selecione *arquivo* e *novo* para criar um novo arquivo de origem.</span><span class="sxs-lookup"><span data-stu-id="1bec4-135">In [Visual Studio Code](https://code.visualstudio.com), select *File* then *New* to create a new source file.</span></span> <span data-ttu-id="1bec4-136">Em qualquer ferramenta, nomeie o arquivo para corresponder à classe: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs*e *GiftCardAccount.cs*.</span><span class="sxs-lookup"><span data-stu-id="1bec4-136">In either tool, name the file to match the class: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs*, and *GiftCardAccount.cs*.</span></span>

<span data-ttu-id="1bec4-137">Ao criar as classes conforme mostrado no exemplo anterior, você descobrirá que nenhuma de suas classes derivadas são compiladas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-137">When you create the classes as shown in the preceding sample, you'll find that none of your derived classes compile.</span></span> <span data-ttu-id="1bec4-138">Um construtor é responsável por inicializar um objeto.</span><span class="sxs-lookup"><span data-stu-id="1bec4-138">A constructor is responsible for initializing an object.</span></span> <span data-ttu-id="1bec4-139">Um construtor de classe derivada deve inicializar a classe derivada e fornecer instruções sobre como inicializar o objeto da classe base incluído na classe derivada.</span><span class="sxs-lookup"><span data-stu-id="1bec4-139">A derived class constructor must initialize the derived class, and provide instructions on how to initialize the base class object included in the derived class.</span></span> <span data-ttu-id="1bec4-140">A inicialização apropriada normalmente ocorre sem nenhum código extra.</span><span class="sxs-lookup"><span data-stu-id="1bec4-140">The proper initialization normally happens without any extra code.</span></span> <span data-ttu-id="1bec4-141">A `BankAccount` classe declara um construtor público com a seguinte assinatura:</span><span class="sxs-lookup"><span data-stu-id="1bec4-141">The `BankAccount` class declares one public constructor with the following signature:</span></span>

```csharp
public BankAccount(string name, decimal initialBalance)
```

<span data-ttu-id="1bec4-142">O compilador não gera um construtor padrão quando você define um construtor por conta própria.</span><span class="sxs-lookup"><span data-stu-id="1bec4-142">The compiler doesn't generate a default constructor when you define a constructor yourself.</span></span> <span data-ttu-id="1bec4-143">Isso significa que cada classe derivada deve chamar explicitamente esse construtor.</span><span class="sxs-lookup"><span data-stu-id="1bec4-143">That means each derived class must explicitly call this constructor.</span></span> <span data-ttu-id="1bec4-144">Você declara um construtor que pode passar argumentos para o construtor da classe base.</span><span class="sxs-lookup"><span data-stu-id="1bec4-144">You declare a constructor that can pass arguments to the base class constructor.</span></span>  <span data-ttu-id="1bec4-145">O código a seguir mostra o construtor para o `InterestEarningAccount` :</span><span class="sxs-lookup"><span data-stu-id="1bec4-145">The following code shows the constructor for the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="DerivedConstructor":::

<span data-ttu-id="1bec4-146">Os parâmetros para esse novo Construtor correspondem ao tipo de parâmetro e aos nomes do construtor da classe base.</span><span class="sxs-lookup"><span data-stu-id="1bec4-146">The parameters to this new constructor match the parameter type and names of the base class constructor.</span></span> <span data-ttu-id="1bec4-147">Você usa a `: base()` sintaxe para indicar uma chamada para um construtor de classe base.</span><span class="sxs-lookup"><span data-stu-id="1bec4-147">You use the `: base()` syntax to indicate a call to a base class constructor.</span></span> <span data-ttu-id="1bec4-148">Algumas classes definem vários construtores, e essa sintaxe permite que você escolha qual Construtor de classe base você chama.</span><span class="sxs-lookup"><span data-stu-id="1bec4-148">Some classes define multiple constructors, and this syntax enables you to pick which base class constructor you call.</span></span> <span data-ttu-id="1bec4-149">Depois de atualizar os construtores, você pode desenvolver o código para cada uma das classes derivadas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-149">Once you've updated the constructors, you can develop the code for each of the derived classes.</span></span> <span data-ttu-id="1bec4-150">Os requisitos para as novas classes podem ser declarados da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="1bec4-150">The requirements for the new classes can be stated as follows:</span></span>

- <span data-ttu-id="1bec4-151">Uma conta de conquista de interesse:</span><span class="sxs-lookup"><span data-stu-id="1bec4-151">An interest earning account:</span></span>
  - <span data-ttu-id="1bec4-152">Receberá um crédito de 2% do saldo de término do mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-152">Will get a credit of 2% of the month-ending-balance.</span></span>
- <span data-ttu-id="1bec4-153">Uma linha de crédito:</span><span class="sxs-lookup"><span data-stu-id="1bec4-153">A line of credit:</span></span>
  - <span data-ttu-id="1bec4-154">Pode ter um saldo negativo, mas não deve ser maior em valor absoluto do que o limite de crédito.</span><span class="sxs-lookup"><span data-stu-id="1bec4-154">Can have a negative balance, but not be greater in absolute value than the credit limit.</span></span>
  - <span data-ttu-id="1bec4-155">Incorrerá em um encargo de juros a cada mês em que o saldo do fim do mês não é 0.</span><span class="sxs-lookup"><span data-stu-id="1bec4-155">Will incur an interest charge each month where the end of month balance isn't 0.</span></span>
  - <span data-ttu-id="1bec4-156">Incorrerá em uma taxa em cada retirada que passa pelo limite de crédito.</span><span class="sxs-lookup"><span data-stu-id="1bec4-156">Will incur a fee on each withdrawal that goes over the credit limit.</span></span>
- <span data-ttu-id="1bec4-157">Uma conta de cartão de presente:</span><span class="sxs-lookup"><span data-stu-id="1bec4-157">A gift card account:</span></span>
  - <span data-ttu-id="1bec4-158">Pode ser recarregado com um valor especificado uma vez por mês, no último dia do mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-158">Can be refilled with a specified amount once each month, on the last day of the month.</span></span>

<span data-ttu-id="1bec4-159">Você pode ver que todos esses três tipos de conta têm uma ação que usa locais no final de cada mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-159">You can see that all three of these account types have an action that takes places at the end of each month.</span></span> <span data-ttu-id="1bec4-160">No entanto, cada tipo de conta executa tarefas diferentes.</span><span class="sxs-lookup"><span data-stu-id="1bec4-160">However, each account type does different tasks.</span></span> <span data-ttu-id="1bec4-161">Você usa *polimorfismo* para implementar esse código.</span><span class="sxs-lookup"><span data-stu-id="1bec4-161">You use *polymorphism* to implement this code.</span></span> <span data-ttu-id="1bec4-162">Crie um único `virtual` método na `BankAccount` classe:</span><span class="sxs-lookup"><span data-stu-id="1bec4-162">Create a single `virtual` method in the `BankAccount` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="DeclareMonthEndTransactions":::

<span data-ttu-id="1bec4-163">O código anterior mostra como você usa a `virtual` palavra-chave para declarar um método na classe base para a qual uma classe derivada pode fornecer uma implementação diferente.</span><span class="sxs-lookup"><span data-stu-id="1bec4-163">The preceding code shows how you use the `virtual` keyword to declare a method in the base class that a derived class may provide a different implementation for.</span></span> <span data-ttu-id="1bec4-164">Um `virtual` método é um método em que qualquer classe derivada pode optar por reimplementar.</span><span class="sxs-lookup"><span data-stu-id="1bec4-164">A `virtual` method is a method where any derived class may choose to reimplement.</span></span> <span data-ttu-id="1bec4-165">As classes derivadas usam a `override` palavra-chave para definir a nova implementação.</span><span class="sxs-lookup"><span data-stu-id="1bec4-165">The derived classes use the `override` keyword to define the new implementation.</span></span> <span data-ttu-id="1bec4-166">Normalmente, você faz referência a isso como "substituindo a implementação da classe base".</span><span class="sxs-lookup"><span data-stu-id="1bec4-166">Typically you refer to this as "overriding the base class implementation".</span></span> <span data-ttu-id="1bec4-167">A `virtual` palavra-chave especifica que as classes derivadas podem substituir o comportamento.</span><span class="sxs-lookup"><span data-stu-id="1bec4-167">The `virtual` keyword specifies that derived classes may override the behavior.</span></span> <span data-ttu-id="1bec4-168">Você também pode declarar `abstract` métodos em que classes derivadas devem substituir o comportamento.</span><span class="sxs-lookup"><span data-stu-id="1bec4-168">You can also declare `abstract` methods where derived classes must override the behavior.</span></span> <span data-ttu-id="1bec4-169">A classe base não fornece uma implementação para um `abstract` método.</span><span class="sxs-lookup"><span data-stu-id="1bec4-169">The base class does not provide an implementation for an `abstract` method.</span></span> <span data-ttu-id="1bec4-170">Em seguida, você precisa definir a implementação para duas das novas classes que você criou.</span><span class="sxs-lookup"><span data-stu-id="1bec4-170">Next, you need to define the implementation for two of the new classes you've created.</span></span> <span data-ttu-id="1bec4-171">Comece com `InterestEarningAccount` :</span><span class="sxs-lookup"><span data-stu-id="1bec4-171">Start with the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="1bec4-172">Adicione o código a seguir ao `LineOfCreditAccount` .</span><span class="sxs-lookup"><span data-stu-id="1bec4-172">Add the following code to the `LineOfCreditAccount`.</span></span> <span data-ttu-id="1bec4-173">O código nega o saldo para computar um encargo de interesse positivo que é retirado da conta:</span><span class="sxs-lookup"><span data-stu-id="1bec4-173">The code negates the balance to compute a positive interest charge that is withdrawn from the account:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="1bec4-174">A `GiftCardAccount` classe precisa de duas alterações para implementar sua funcionalidade de fim de mês.</span><span class="sxs-lookup"><span data-stu-id="1bec4-174">The `GiftCardAccount` class needs two changes to implement its month-end functionality.</span></span> <span data-ttu-id="1bec4-175">Primeiro, modifique o construtor para incluir um valor opcional a ser adicionado a cada mês:</span><span class="sxs-lookup"><span data-stu-id="1bec4-175">First, modify the constructor to include an optional amount to add each month:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="GiftCardAccountConstruction":::

<span data-ttu-id="1bec4-176">O construtor fornece um valor padrão para o `monthlyDeposit` valor para que os chamadores possam omitir um `0` para nenhum depósito mensal.</span><span class="sxs-lookup"><span data-stu-id="1bec4-176">The constructor provides a default value for the `monthlyDeposit` value so callers can omit a `0` for no monthly deposit.</span></span> <span data-ttu-id="1bec4-177">Em seguida, substitua o `PerformMonthEndTransactions` método para adicionar o depósito mensal, se ele tiver sido definido como um valor diferente de zero no construtor:</span><span class="sxs-lookup"><span data-stu-id="1bec4-177">Next, override the `PerformMonthEndTransactions` method to add the monthly deposit, if it was set to a non-zero value in the constructor:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="AddMonthlyDeposit":::

<span data-ttu-id="1bec4-178">A substituição aplica o conjunto de depósito mensal no construtor.</span><span class="sxs-lookup"><span data-stu-id="1bec4-178">The override applies the monthly deposit set in the constructor.</span></span> <span data-ttu-id="1bec4-179">Adicione o seguinte código ao `Main` método para testar essas alterações para o `GiftCardAccount` e o `InterestEarningAccount` :</span><span class="sxs-lookup"><span data-stu-id="1bec4-179">Add the following code to the `Main` method to test these changes for the `GiftCardAccount` and the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="FirstTests":::

<span data-ttu-id="1bec4-180">Verifique os resultados.</span><span class="sxs-lookup"><span data-stu-id="1bec4-180">Verify the results.</span></span> <span data-ttu-id="1bec4-181">Agora, adicione um conjunto semelhante de código de teste para o `LineOfCreditAccount` :</span><span class="sxs-lookup"><span data-stu-id="1bec4-181">Now, add a similar set of test code for the `LineOfCreditAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="TestLineOfCredit":::

<span data-ttu-id="1bec4-182">Ao adicionar o código anterior e executar o programa, você verá algo semelhante ao seguinte erro:</span><span class="sxs-lookup"><span data-stu-id="1bec4-182">When you add the preceding code and run the program, you'll see something like the following error:</span></span>

```console
Unhandled exception. System.ArgumentOutOfRangeException: Amount of deposit must be positive (Parameter 'amount')
   at OOProgramming.BankAccount.MakeDeposit(Decimal amount, DateTime date, String note) in BankAccount.cs:line 42
   at OOProgramming.BankAccount..ctor(String name, Decimal initialBalance) in BankAccount.cs:line 31
   at OOProgramming.LineOfCreditAccount..ctor(String name, Decimal initialBalance) in LineOfCreditAccount.cs:line 9
   at OOProgramming.Program.Main(String[] args) in Program.cs:line 29
```

> [!NOTE]
> <span data-ttu-id="1bec4-183">A saída real inclui o caminho completo para a pasta com o projeto.</span><span class="sxs-lookup"><span data-stu-id="1bec4-183">The actual output includes the full path to the folder with the project.</span></span> <span data-ttu-id="1bec4-184">Os nomes das pastas foram omitidos para fins de brevidade.</span><span class="sxs-lookup"><span data-stu-id="1bec4-184">The folder names were omitted for brevity.</span></span> <span data-ttu-id="1bec4-185">Além disso, dependendo do seu formato de código, os números de linha podem ser um pouco diferentes.</span><span class="sxs-lookup"><span data-stu-id="1bec4-185">Also, depending on your code format, the line numbers may be slightly different.</span></span>

<span data-ttu-id="1bec4-186">Esse código falha porque o `BankAccount` supõe que o saldo inicial deve ser maior que 0.</span><span class="sxs-lookup"><span data-stu-id="1bec4-186">This code fails because the `BankAccount` assumes that the initial balance must be greater than 0.</span></span> <span data-ttu-id="1bec4-187">Outra suposição inclusas na `BankAccount` classe é que o saldo não pode ficar negativo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-187">Another assumption baked into the `BankAccount` class is that the balance can't go negative.</span></span> <span data-ttu-id="1bec4-188">Em vez disso, qualquer retirada que redesenha a conta é rejeitada.</span><span class="sxs-lookup"><span data-stu-id="1bec4-188">Instead, any withdrawal that overdraws the account is rejected.</span></span> <span data-ttu-id="1bec4-189">Ambas as suposições precisam ser alteradas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-189">Both of those assumptions need to change.</span></span> <span data-ttu-id="1bec4-190">A linha de conta de crédito começa em 0 e geralmente terá um saldo negativo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-190">The line of credit account starts at 0, and generally will have a negative balance.</span></span> <span data-ttu-id="1bec4-191">Além disso, se um cliente emprestando muito dinheiro, ele incorrerá em uma taxa.</span><span class="sxs-lookup"><span data-stu-id="1bec4-191">Also, if a customer borrows too much money, they incur a fee.</span></span> <span data-ttu-id="1bec4-192">A transação é aceita, ela apenas custa mais.</span><span class="sxs-lookup"><span data-stu-id="1bec4-192">The transaction is accepted, it just costs more.</span></span> <span data-ttu-id="1bec4-193">A primeira regra pode ser implementada adicionando um argumento opcional ao `BankAccount` Construtor que especifica o saldo mínimo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-193">The first rule can be implemented by adding an optional argument to the `BankAccount` constructor that specifies the minimum balance.</span></span> <span data-ttu-id="1bec4-194">O padrão é `0`.</span><span class="sxs-lookup"><span data-stu-id="1bec4-194">The default is `0`.</span></span> <span data-ttu-id="1bec4-195">A segunda regra requer um mecanismo que permita que as classes derivadas modifiquem o algoritmo padrão.</span><span class="sxs-lookup"><span data-stu-id="1bec4-195">The second rule requires a mechanism that enables derived classes to modify the default algorithm.</span></span> <span data-ttu-id="1bec4-196">De certa forma, a classe base "pergunta" o tipo derivado o que deve acontecer quando há um superrascunho.</span><span class="sxs-lookup"><span data-stu-id="1bec4-196">In a sense, the base class "asks" the derived type what should happen when there's an overdraft.</span></span> <span data-ttu-id="1bec4-197">O comportamento padrão é rejeitar a transação lançando uma exceção.</span><span class="sxs-lookup"><span data-stu-id="1bec4-197">The default behavior is to reject the transaction by throwing an exception.</span></span>

<span data-ttu-id="1bec4-198">Vamos começar adicionando um segundo construtor que inclui um `minimumBalance` parâmetro opcional.</span><span class="sxs-lookup"><span data-stu-id="1bec4-198">Let's start by adding a second constructor that includes an optional `minimumBalance` parameter.</span></span> <span data-ttu-id="1bec4-199">Esse novo construtor executa todas as ações feitas pelo Construtor existente.</span><span class="sxs-lookup"><span data-stu-id="1bec4-199">This new constructor does all the actions done by the existing constructor.</span></span> <span data-ttu-id="1bec4-200">Além disso, ele define a propriedade de saldo mínimo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-200">Also, it sets the minimum balance property.</span></span> <span data-ttu-id="1bec4-201">Você pode copiar o corpo do Construtor existente.</span><span class="sxs-lookup"><span data-stu-id="1bec4-201">You could copy the body of the existing constructor.</span></span> <span data-ttu-id="1bec4-202">Mas isso significa que dois locais são alterados no futuro.</span><span class="sxs-lookup"><span data-stu-id="1bec4-202">but that means two locations to change in the future.</span></span> <span data-ttu-id="1bec4-203">Em vez disso, você pode usar o *encadeamento de Construtor* para fazer com que um Construtor Chame outro.</span><span class="sxs-lookup"><span data-stu-id="1bec4-203">Instead, you can use *constructor chaining* to have one constructor call another.</span></span> <span data-ttu-id="1bec4-204">O código a seguir mostra os dois construtores e o novo campo adicional:</span><span class="sxs-lookup"><span data-stu-id="1bec4-204">The following code shows the two constructors and the new additional field:</span></span>

 :::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="ConstructorModifications":::

<span data-ttu-id="1bec4-205">O código anterior mostra duas novas técnicas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-205">The preceding code shows two new techniques.</span></span> <span data-ttu-id="1bec4-206">Primeiro, o `minimumBalance` campo é marcado como `readonly` .</span><span class="sxs-lookup"><span data-stu-id="1bec4-206">First, the `minimumBalance` field is marked as `readonly`.</span></span> <span data-ttu-id="1bec4-207">Isso significa que o valor não pode ser alterado depois que o objeto é construído.</span><span class="sxs-lookup"><span data-stu-id="1bec4-207">That means the value cannot be changed after the object is constructed.</span></span> <span data-ttu-id="1bec4-208">Depois que um `BankAccount` é criado, o `minimumBalance` não pode mudar.</span><span class="sxs-lookup"><span data-stu-id="1bec4-208">Once a `BankAccount` is created, the `minimumBalance` can't change.</span></span> <span data-ttu-id="1bec4-209">Em segundo lugar, o construtor que usa dois parâmetros utiliza `: this(name, initialBalance, 0) { }` como sua implementação.</span><span class="sxs-lookup"><span data-stu-id="1bec4-209">Second, the constructor that takes two parameters uses `: this(name, initialBalance, 0) { }` as its implementation.</span></span> <span data-ttu-id="1bec4-210">A `: this()` expressão chama o outro construtor, aquele com três parâmetros.</span><span class="sxs-lookup"><span data-stu-id="1bec4-210">The `: this()` expression calls the other constructor, the one with three parameters.</span></span> <span data-ttu-id="1bec4-211">Essa técnica permite que você tenha uma única implementação para inicializar um objeto, embora o código do cliente possa escolher um dos muitos construtores.</span><span class="sxs-lookup"><span data-stu-id="1bec4-211">This technique allows you to have a single implementation for initializing an object even though client code can choose one of many constructors.</span></span>

<span data-ttu-id="1bec4-212">Essa implementação só chamará `MakeDeposit` se o saldo inicial for maior que `0` .</span><span class="sxs-lookup"><span data-stu-id="1bec4-212">This implementation calls `MakeDeposit` only if the initial balance is greater than `0`.</span></span> <span data-ttu-id="1bec4-213">Isso preserva a regra que os depósitos devem ser positivos, mas permite que a conta de crédito seja aberta com um `0` saldo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-213">That preserves the rule that deposits must be positive, yet lets the credit account open with a `0` balance.</span></span>

<span data-ttu-id="1bec4-214">Agora que a `BankAccount` classe tem um campo somente leitura para o saldo mínimo, a alteração final é alterar o código físico `0` para `minimumBalance` no `MakeWithdrawal` método:</span><span class="sxs-lookup"><span data-stu-id="1bec4-214">Now that the `BankAccount` class has a read-only field for the minimum balance, the final change is to change the hard code `0` to `minimumBalance` in the `MakeWithdrawal` method:</span></span>

```csharp
if (Balance - amount < minimumBalance)
```

<span data-ttu-id="1bec4-215">Depois de estender a `BankAccount` classe, você pode modificar o `LineOfCreditAccount` construtor para chamar o novo construtor base, conforme mostrado no código a seguir:</span><span class="sxs-lookup"><span data-stu-id="1bec4-215">After extending the `BankAccount` class, you can modify the `LineOfCreditAccount` constructor to call the new base constructor, as shown in the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ConstructLineOfCredit":::

<span data-ttu-id="1bec4-216">Observe que o `LineOfCreditAccount` Construtor altera o sinal do `creditLimit` parâmetro para que ele corresponda ao significado do `minimumBalance` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="1bec4-216">Notice that the `LineOfCreditAccount` constructor changes the sign of the `creditLimit` parameter so it matches the meaning of the `minimumBalance` parameter.</span></span>

## <a name="different-overdraft-rules"></a><span data-ttu-id="1bec4-217">Regras diferentes de rascunho</span><span class="sxs-lookup"><span data-stu-id="1bec4-217">Different overdraft rules</span></span>

<span data-ttu-id="1bec4-218">O último recurso a ser adicionado permite que o `LineOfCreditAccount` encarregue uma taxa para passar pelo limite de crédito em vez de recusar a transação.</span><span class="sxs-lookup"><span data-stu-id="1bec4-218">The last feature to add enables the `LineOfCreditAccount` to charge a fee for going over the credit limit instead of refusing the transaction.</span></span>

<span data-ttu-id="1bec4-219">Uma técnica é definir uma função virtual na qual você implementa o comportamento necessário.</span><span class="sxs-lookup"><span data-stu-id="1bec4-219">One technique is to define a virtual function where you implement the required behavior.</span></span> <span data-ttu-id="1bec4-220">A `BankAccount` classe refatora o `MakeWithdrawal` método em dois métodos.</span><span class="sxs-lookup"><span data-stu-id="1bec4-220">The `BankAccount` class refactors the `MakeWithdrawal` method into two methods.</span></span> <span data-ttu-id="1bec4-221">O novo método faz a ação especificada quando a retirada usa o saldo abaixo do mínimo.</span><span class="sxs-lookup"><span data-stu-id="1bec4-221">The new method does the specified action when the withdrawal takes the balance below the minimum.</span></span> <span data-ttu-id="1bec4-222">O `MakeWithdrawal` método existente tem o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="1bec4-222">The existing `MakeWithdrawal` method has the following code:</span></span>

```csharp
public void MakeWithdrawal(decimal amount, DateTime date, string note)
{
    if (amount <= 0)
    {
        throw new ArgumentOutOfRangeException(nameof(amount), "Amount of withdrawal must be positive");
    }
    if (Balance - amount < minimumBalance)
    {
        throw new InvalidOperationException("Not sufficient funds for this withdrawal");
    }
    var withdrawal = new Transaction(-amount, date, note);
    allTransactions.Add(withdrawal);
}
```

<span data-ttu-id="1bec4-223">Substitua-o pelo seguinte código:</span><span class="sxs-lookup"><span data-stu-id="1bec4-223">Replace it with the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="RefactoredMakeWithdrawal":::

<span data-ttu-id="1bec4-224">O método adicionado é `protected` , o que significa que ele pode ser chamado somente de classes derivadas.</span><span class="sxs-lookup"><span data-stu-id="1bec4-224">The added method is `protected`, which means that it can be called only from derived classes.</span></span> <span data-ttu-id="1bec4-225">Essa declaração impede que outros clientes chamem o método.</span><span class="sxs-lookup"><span data-stu-id="1bec4-225">That declaration prevents other clients from calling the method.</span></span> <span data-ttu-id="1bec4-226">Também é `virtual` para que as classes derivadas possam alterar o comportamento.</span><span class="sxs-lookup"><span data-stu-id="1bec4-226">It's also `virtual` so that derived classes can change the behavior.</span></span> <span data-ttu-id="1bec4-227">O tipo de retorno é um `Transaction?` .</span><span class="sxs-lookup"><span data-stu-id="1bec4-227">The return type is a `Transaction?`.</span></span> <span data-ttu-id="1bec4-228">A `?` anotação indica que o método pode retornar `null` .</span><span class="sxs-lookup"><span data-stu-id="1bec4-228">The `?` annotation indicates that the method may return `null`.</span></span> <span data-ttu-id="1bec4-229">Adicione a seguinte implementação no `LineOfCreditAccount` para cobrar uma taxa quando o limite de retirada for excedido:</span><span class="sxs-lookup"><span data-stu-id="1bec4-229">Add the following implementation in the `LineOfCreditAccount` to charge a fee when the withdrawal limit is exceeded:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="AddOverdraftFee":::

<span data-ttu-id="1bec4-230">A substituição retorna uma transação de taxa quando a conta é sobredesenhada.</span><span class="sxs-lookup"><span data-stu-id="1bec4-230">The override returns a fee transaction when the account is overdrawn.</span></span> <span data-ttu-id="1bec4-231">Se a retirada não ultrapassar o limite, o método retornará uma `null` transação.</span><span class="sxs-lookup"><span data-stu-id="1bec4-231">If the withdrawal doesn't go over the limit, the method returns a `null` transaction.</span></span> <span data-ttu-id="1bec4-232">Isso indica que não há nenhuma taxa.</span><span class="sxs-lookup"><span data-stu-id="1bec4-232">That indicates there's no fee.</span></span> <span data-ttu-id="1bec4-233">Teste essas alterações adicionando o seguinte código ao seu `Main` método na `Program` classe:</span><span class="sxs-lookup"><span data-stu-id="1bec4-233">Test these changes by adding the following code to your `Main` method in the `Program` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="TestLineOfCredit":::

<span data-ttu-id="1bec4-234">Execute o programa e verifique os resultados.</span><span class="sxs-lookup"><span data-stu-id="1bec4-234">Run the program, and check the results.</span></span>

## <a name="summary"></a><span data-ttu-id="1bec4-235">Resumo</span><span class="sxs-lookup"><span data-stu-id="1bec4-235">Summary</span></span>

<span data-ttu-id="1bec4-236">Este tutorial demonstrou muitas das técnicas usadas na programação de Object-Oriented:</span><span class="sxs-lookup"><span data-stu-id="1bec4-236">This tutorial demonstrated many of the techniques used in Object-Oriented programming:</span></span>

- <span data-ttu-id="1bec4-237">Você usou a *abstração* quando manteve muitos detalhes `private` em cada classe.</span><span class="sxs-lookup"><span data-stu-id="1bec4-237">You used *Abstraction* when you kept many details `private` in each class.</span></span>
- <span data-ttu-id="1bec4-238">Você usou o *encapsulamento* quando definiu classes para cada um dos tipos de conta diferentes.</span><span class="sxs-lookup"><span data-stu-id="1bec4-238">You used *Encapsulation* when you defined classes for each of the different account types.</span></span> <span data-ttu-id="1bec4-239">Essas classes descreveram o comportamento para esse tipo de conta.</span><span class="sxs-lookup"><span data-stu-id="1bec4-239">Those classes described the behavior for that type of account.</span></span>
- <span data-ttu-id="1bec4-240">Você usou a *herança* quando utilizou a implementação já criada na `BankAccount` classe para salvar o código.</span><span class="sxs-lookup"><span data-stu-id="1bec4-240">You used *Inheritance* when you leveraged the implementation already created in the `BankAccount` class to save code.</span></span>
- <span data-ttu-id="1bec4-241">Você usou *polimorfismo* quando criou `virtual` métodos que classes derivadas poderiam substituir para criar um comportamento específico para esse tipo de conta.</span><span class="sxs-lookup"><span data-stu-id="1bec4-241">You used *Polymorphism* when you created `virtual` methods that derived classes could override to create specific behavior for that account type.</span></span>

<span data-ttu-id="1bec4-242">Parabéns, você concluiu toda a nossa introdução aos tutoriais em C#.</span><span class="sxs-lookup"><span data-stu-id="1bec4-242">Congratulations, you've finished all of our introduction to C# tutorials.</span></span> <span data-ttu-id="1bec4-243">Para saber mais, experimente mais nossos [tutoriais](../index.md).</span><span class="sxs-lookup"><span data-stu-id="1bec4-243">To learn more, try more of our [tutorials](../index.md).</span></span>
