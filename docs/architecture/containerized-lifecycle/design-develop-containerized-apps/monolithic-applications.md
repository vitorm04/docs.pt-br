---
title: Aplicativos monolíticos
description: Entenda os principais conceitos da implantação de aplicativos monolíticos em contêineres.
ms.date: 02/15/2019
ms.openlocfilehash: 1d4b54017e431bd9775bf2aee8c88f56e0489367
ms.sourcegitcommit: 2e95559d957a1a942e490c5fd916df04b39d73a9
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/16/2019
ms.locfileid: "72394711"
---
# <a name="monolithic-applications"></a><span data-ttu-id="612cc-103">Aplicativos monolíticos</span><span class="sxs-lookup"><span data-stu-id="612cc-103">Monolithic applications</span></span>

<span data-ttu-id="612cc-104">Neste cenário, você está criando um aplicativo ou serviço Web único e monolítico e implantando-o como um contêiner.</span><span class="sxs-lookup"><span data-stu-id="612cc-104">In this scenario, you're building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="612cc-105">A estrutura do aplicativo pode não ser monolítica, mas pode compreender várias bibliotecas, componentes ou até mesmo camadas (camada de aplicativo, de domínio, de acesso a dados etc.).</span><span class="sxs-lookup"><span data-stu-id="612cc-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="612cc-106">Externamente, ele é um único contêiner, como um único processo, um único aplicativo Web ou um único serviço.</span><span class="sxs-lookup"><span data-stu-id="612cc-106">Externally, it's a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="612cc-107">Para gerenciar esse modelo, implante um contêiner único para representar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="612cc-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="612cc-108">Para dimensionar, adicione mais cópias com o balanceador de carga na frente.</span><span class="sxs-lookup"><span data-stu-id="612cc-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="612cc-109">A simplicidade está em gerenciar uma implantação única em um contêiner ou VM (máquina virtual) único.</span><span class="sxs-lookup"><span data-stu-id="612cc-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="612cc-110">Seguindo o princípio de que um contêiner executa uma ação e faz isso em um processo, o padrão monolítico pode gerar um conflito.</span><span class="sxs-lookup"><span data-stu-id="612cc-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="612cc-111">É possível incluir vários componentes/bibliotecas ou camadas internas em cada contêiner, conforme ilustrado na Figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="612cc-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![Diagrama mostrando um aplicativo monolítico que se expande clonando o aplicativo.](./media/monolithic-applications/monolithic-application-architecture-example.png)

<span data-ttu-id="612cc-113">**Figura 4-1.**</span><span class="sxs-lookup"><span data-stu-id="612cc-113">**Figure 4-1.**</span></span> <span data-ttu-id="612cc-114">Um exemplo de arquitetura de aplicativo monolítico</span><span class="sxs-lookup"><span data-stu-id="612cc-114">An example of monolithic application architecture</span></span>

<span data-ttu-id="612cc-115">Um aplicativo monolítico tem todas ou a maioria das funcionalidades em um único processo ou contêiner, além dividir os componentes em camadas ou bibliotecas internas.</span><span class="sxs-lookup"><span data-stu-id="612cc-115">A monolithic app has all or most of its functionality within a single process or container and it's componentized in internal layers or libraries.</span></span> <span data-ttu-id="612cc-116">O ponto negativo dessa abordagem ficará evidente se ou quando o aplicativo crescer e for necessário dimensioná-lo.</span><span class="sxs-lookup"><span data-stu-id="612cc-116">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="612cc-117">Se o aplicativo inteiro for dimensionado, isso não será realmente um problema.</span><span class="sxs-lookup"><span data-stu-id="612cc-117">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="612cc-118">Entretanto, na maioria dos casos, algumas partes do aplicativo são os pontos de redução que exigem dimensionamento, enquanto outros componentes são menos utilizados.</span><span class="sxs-lookup"><span data-stu-id="612cc-118">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="612cc-119">Usando o exemplo típico de comércio eletrônico, o que você provavelmente precisa é dimensionar o componente de informações do produto.</span><span class="sxs-lookup"><span data-stu-id="612cc-119">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="612cc-120">Uma quantidade muito maior de clientes procura produtos em vez de comprá-los.</span><span class="sxs-lookup"><span data-stu-id="612cc-120">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="612cc-121">Mais clientes usam o carrinho em vez do pipeline de pagamento.</span><span class="sxs-lookup"><span data-stu-id="612cc-121">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="612cc-122">Menos clientes fazem comentários ou exibem o histórico de compras.</span><span class="sxs-lookup"><span data-stu-id="612cc-122">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="612cc-123">E você provavelmente tem apenas um grupo de funcionários, em uma única região, que precisa gerenciar o conteúdo e as campanhas de marketing.</span><span class="sxs-lookup"><span data-stu-id="612cc-123">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="612cc-124">Ao dimensionar o design monolítico, todo o código é implantado várias vezes.</span><span class="sxs-lookup"><span data-stu-id="612cc-124">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="612cc-125">Além do problema de “ter que dimensionar tudo”, a alteração de um único componente exige um novo teste completo de todo o aplicativo e uma reimplantação completa de todas as instâncias.</span><span class="sxs-lookup"><span data-stu-id="612cc-125">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="612cc-126">A abordagem monolítica é comum e muitas organizações estão desenvolvendo com essa abordagem de arquitetura.</span><span class="sxs-lookup"><span data-stu-id="612cc-126">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="612cc-127">Várias têm resultados bons o suficiente, enquanto outras encontram obstáculos.</span><span class="sxs-lookup"><span data-stu-id="612cc-127">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="612cc-128">Muitas criaram seus aplicativos nesse modelo porque as ferramentas e a infraestrutura eram muito difíceis para criar SOAs e elas não viam a necessidade até que o aplicativo crescesse.</span><span class="sxs-lookup"><span data-stu-id="612cc-128">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="612cc-129">De uma perspectiva de infraestrutura, cada servidor pode executar vários aplicativos no mesmo host e ter um índice de eficiência razoável de uso de recursos, conforme mostrado na Figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="612cc-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![Um diagrama que mostra um host com vários aplicativos em contêineres separados.](./media/monolithic-applications/host-with-multiple-apps-containers.png)

<span data-ttu-id="612cc-131">**Figura 4-2.**</span><span class="sxs-lookup"><span data-stu-id="612cc-131">**Figure 4-2.**</span></span> <span data-ttu-id="612cc-132">Um host executando vários aplicativos/contêineres</span><span class="sxs-lookup"><span data-stu-id="612cc-132">A host running multiple apps/containers</span></span>

<span data-ttu-id="612cc-133">Por fim, de uma perspectiva de disponibilidade, os aplicativos monolíticos devem ser implantados como um todo. Isso significa que se você precisar *parar e iniciar*, todas as funcionalidades e todos os usuários serão afetados durante a janela de implantação.</span><span class="sxs-lookup"><span data-stu-id="612cc-133">Finally, from an availability perspective, monolithic applications must be deployed as a whole; that means that in case you must *stop and start*, all functionality and all users will be affected during the deployment window.</span></span> <span data-ttu-id="612cc-134">Em certos casos, o uso do Azure e dos contêineres pode minimizar essas situações e reduzir a probabilidade de tempo de inatividade do aplicativo, como você pode ver na Figura 4-3.</span><span class="sxs-lookup"><span data-stu-id="612cc-134">In certain situations, the use of Azure and containers can minimize these situations and reduce the probability of downtime of your application, as you can see in Figure 4-3.</span></span>

<span data-ttu-id="612cc-135">Os aplicativos monolíticos no Microsoft Azure podem ser implantados por meio de VMs dedicadas a cada instância.</span><span class="sxs-lookup"><span data-stu-id="612cc-135">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="612cc-136">Com os [Conjuntos de Dimensionamento de VMs do Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), é possível dimensionar as VMs com facilidade.</span><span class="sxs-lookup"><span data-stu-id="612cc-136">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span>

<span data-ttu-id="612cc-137">Também é possível usar os [Serviços de Aplicativos do Azure](https://azure.microsoft.com/services/app-service/) para executar aplicativos monolíticos e dimensionar instâncias com facilidade, sem a necessidade de gerenciar as VMs.</span><span class="sxs-lookup"><span data-stu-id="612cc-137">You can also use [Azure App Services](https://azure.microsoft.com/services/app-service/) to run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="612cc-138">Os Serviços de Aplicativos do Azure também podem executar instâncias únicas de contêineres do Docker, simplificando a implantação.</span><span class="sxs-lookup"><span data-stu-id="612cc-138">Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span>

<span data-ttu-id="612cc-139">É possível implantar várias VMs como hosts do Docker e executar qualquer quantidade de contêineres por VM.</span><span class="sxs-lookup"><span data-stu-id="612cc-139">You can deploy multiple VMs as Docker hosts and run any number of containers per VM.</span></span> <span data-ttu-id="612cc-140">Em seguida, usando o Azure Load Balancer, conforme ilustrado na Figura 4-3, você pode gerenciar o dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="612cc-140">Then, by using an Azure Load Balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![Um diagrama que mostra um aplicativo monolítico dimensionado para hosts diferentes.](./media/monolithic-applications/multiple-hosts-from-single-docker-container.png)

<span data-ttu-id="612cc-142">**Figura 4-3**.</span><span class="sxs-lookup"><span data-stu-id="612cc-142">**Figure 4-3**.</span></span> <span data-ttu-id="612cc-143">Vários hosts expandindo um único aplicativo Docker</span><span class="sxs-lookup"><span data-stu-id="612cc-143">Multiple hosts scaling out a single Docker application</span></span>

<span data-ttu-id="612cc-144">É possível gerenciar a implantação dos próprios hosts por meio de técnicas de implantação tradicionais.</span><span class="sxs-lookup"><span data-stu-id="612cc-144">You can manage the deployment of the hosts themselves via traditional deployment techniques.</span></span>

<span data-ttu-id="612cc-145">Você pode gerenciar os contêineres do Docker na linha de comando usando comandos como `docker run` e `docker-compose up`. Além disso, também é possível automatizá-los nos pipelines de CD (entrega contínua) e implantá-los nos hosts do Docker por meio do Azure DevOps Services, por exemplo.</span><span class="sxs-lookup"><span data-stu-id="612cc-145">You can manage Docker containers from the command line by using commands like `docker run` and `docker-compose up`, and you can also automate it in Continuous Delivery (CD) pipelines and deploy to Docker hosts from Azure DevOps Services, for instance.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="612cc-146">Aplicativo monolítico implantado como um contêiner</span><span class="sxs-lookup"><span data-stu-id="612cc-146">Monolithic application deployed as a container</span></span>

<span data-ttu-id="612cc-147">Há benefícios em usar contêineres para gerenciar implantações monolíticas.</span><span class="sxs-lookup"><span data-stu-id="612cc-147">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="612cc-148">O dimensionamento das instâncias de contêineres é muito mais rápido e fácil do que a implantação de VMs adicionais.</span><span class="sxs-lookup"><span data-stu-id="612cc-148">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span>

<span data-ttu-id="612cc-149">Implantar atualizações como imagens do Docker é muito mais rápido e eficiente em termos de rede.</span><span class="sxs-lookup"><span data-stu-id="612cc-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="612cc-150">Os contêineres do Docker costumam ser iniciados em segundos, o que agiliza as distribuições.</span><span class="sxs-lookup"><span data-stu-id="612cc-150">Docker containers typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="612cc-151">Desmontar um contêiner do Docker é tão fácil quanto invocar o comando `docker stop` e geralmente leva menos de um segundo.</span><span class="sxs-lookup"><span data-stu-id="612cc-151">Tearing down a Docker container is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="612cc-152">Como os contêineres são inerentemente imutáveis por design, você nunca precisa se preocupar com VMs corrompidas porque um script de atualização esqueceu de levar em conta alguma configuração específica ou um arquivo deixado no disco.</span><span class="sxs-lookup"><span data-stu-id="612cc-152">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="612cc-153">Embora aplicativos monolíticos possam se beneficiar do Docker, estamos mencionando apenas as dicas de benefícios.</span><span class="sxs-lookup"><span data-stu-id="612cc-153">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="612cc-154">Outros benefícios de gerenciar contêineres são decorrentes da implantação com orquestradores de contêiner, que gerenciam as diversas instâncias e o ciclo de vida de cada instância de contêiner.</span><span class="sxs-lookup"><span data-stu-id="612cc-154">The larger benefits of managing containers come from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="612cc-155">Dividir o aplicativo monolítico em subsistemas que podem ser dimensionados, desenvolvidos e implantados individualmente é o ponto de entrada no universo dos microsserviços.</span><span class="sxs-lookup"><span data-stu-id="612cc-155">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

<span data-ttu-id="612cc-156">Para saber mais sobre como fazer o "lift and shift" de aplicativos monolíticos com contêineres e como modernizar os aplicativos, leia este outro guia da Microsoft, [Modernizar aplicativos .NET existentes com contêineres do Windows e de nuvem do Azure](../../modernize-with-azure-containers/index.md), que também pode ser baixado como PDF em <https://aka.ms/LiftAndShiftWithContainersEbook>.</span><span class="sxs-lookup"><span data-stu-id="612cc-156">To learn about how to “lift and shift” monolithic applications with containers and how you can modernize your applications, you can read this additional Microsoft guide, [Modernize existing .NET applications with Azure cloud and Windows Containers](../../modernize-with-azure-containers/index.md), that you can also download as PDF from <https://aka.ms/LiftAndShiftWithContainersEbook>.</span></span>

## <a name="publish-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="612cc-157">Publicar um aplicativo de contêiner único do Docker no Serviço de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="612cc-157">Publish a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="612cc-158">Seja para validar rapidamente um contêiner implantado no Azure ou simplesmente quando um aplicativo de contêiner único, os Serviços de Aplicativos do Azure é uma ótima maneira de oferecer serviços escalonáveis de contêiner único.</span><span class="sxs-lookup"><span data-stu-id="612cc-158">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="612cc-159">Usar o Serviço de Aplicativo do Azure é intuitivo e você pode começar a trabalhar rapidamente, porque ele oferece uma ótima integração com o Git para processar seu código, compilá-lo no Microsoft Visual Studio e implantá-lo diretamente no Azure.</span><span class="sxs-lookup"><span data-stu-id="612cc-159">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="612cc-160">No entanto, tradicionalmente (sem o Docker), se você precisasse de outras funcionalidades, estruturas ou dependências não compatíveis com os Serviços de Aplicativos, deveria aguardar até a equipe do Azure atualizar essas dependências no Serviço de Aplicativo ou migrar para outros serviços como o Service Fabric, os Serviços de Nuvem ou até mesmo VMs simples, em que você tem mais controle e pode instalar um componente ou estrutura obrigatória para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="612cc-160">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="612cc-161">Agora, conforme mostrado na Figura 4-4, ao usar o Visual Studio 2017, o suporte para contêineres no Serviço de Aplicativo do Azure oferece a capacidade de incluir tudo o que você deseja no ambiente do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="612cc-161">Now, as shown in Figure 4-4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="612cc-162">Se você tiver adicionado uma dependência ao aplicativo porque ele está sendo executado em um contêiner, terá a capacidade de incluir essas dependências no Dockerfile ou na imagem do Docker.</span><span class="sxs-lookup"><span data-stu-id="612cc-162">If you added a dependency to your app, because you're running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![Captura de tela da caixa de diálogo Criar serviço de aplicativo mostrando um registro de contêiner.](./media/monolithic-applications/publish-azure-app-service-container.png)

<span data-ttu-id="612cc-164">**Figura 4-4**.</span><span class="sxs-lookup"><span data-stu-id="612cc-164">**Figure 4-4**.</span></span> <span data-ttu-id="612cc-165">Publicação de um contêiner no Serviço de Aplicativo do Azure nos aplicativos/contêineres do Visual Studio</span><span class="sxs-lookup"><span data-stu-id="612cc-165">Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="612cc-166">A Figura 4-4 também mostra que o fluxo de publicação efetua push de uma imagem por meio de um Contêiner de Registro, que pode ser o Registro de Contêiner do Azure (um registro próximo às implantações no Azure e protegido por grupos e contas do Azure Active Directory) ou outros registros do Docker, como o Docker Hub ou um registro local.</span><span class="sxs-lookup"><span data-stu-id="612cc-166">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="612cc-167">[Anterior](common-container-design-principles.md)
>[Próximo](state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="612cc-167">[Previous](common-container-design-principles.md)
[Next](state-and-data-in-docker-applications.md)</span></span>
